# Language / Locale
d-i debian-installer/language string en
d-i debian-installer/country string US
d-i debian-installer/locale string en_US.UTF-8

# Network
d-i netcfg/choose_interface select auto

# Account: User "bank"
d-i passwd/user-fullname string Bank User
d-i passwd/username string bank
# To automate, set a default password (e.g., 'password')
d-i passwd/user-password password password
d-i passwd/user-password-again password password

# Minimal XFCE Core + Requested Tools
# spice-vdagent is included for shared clipboard
tasksel tasksel/first multiselect 
d-i pkgsel/include string xfce4-session xfwm4 xfce4-panel xfce4-settings xfce4-terminal xfconf xfdesktop4 lightdm firefox-esr mousepad spice-vdagent rclone keepassxc sudo

# Automation: No prompt for reboot, use -y for everything
d-i pkgsel/upgrade select safe-upgrade
d-i grub-installer/only_debian boolean true
d-i finish-install/reboot_in_progress note

# Late Command: Set up sudo for 'bank' without a password
d-i preseed/late_command string \
    echo 'bank ALL=(ALL) NOPASSWD: ALL' > /target/etc/sudoers.d/bank ; \
    in-target chmod 440 /etc/sudoers.d/bank
